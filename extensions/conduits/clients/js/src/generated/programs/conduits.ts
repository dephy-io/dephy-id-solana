/**
 * This code was AUTOGENERATED using the kinobi library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun kinobi to update it.
 *
 * @see https://github.com/kinobi-so/kinobi
 */

import {
  containsBytes,
  getU8Encoder,
  type Address,
  type ReadonlyUint8Array,
} from '@solana/web3.js';
import {
  type ParsedCreateAccessIdentityInstruction,
  type ParsedDelistDeviceInstruction,
  type ParsedEndLeaseInstruction,
  type ParsedInitAppInstruction,
  type ParsedListDeviceInstruction,
  type ParsedPayRentInstruction,
  type ParsedRentDeviceInstruction,
} from '../instructions';

export const CONDUITS_PROGRAM_ADDRESS =
  '29V5YJFAMQuN8npySW2Kds8zwf6zPTpJ49LyYv1jSGQQ' as Address<'29V5YJFAMQuN8npySW2Kds8zwf6zPTpJ49LyYv1jSGQQ'>;

export enum ConduitsAccount {
  App,
  ListingInfo,
  RentalInfo,
}

export enum ConduitsInstruction {
  InitApp,
  CreateAccessIdentity,
  ListDevice,
  DelistDevice,
  RentDevice,
  PayRent,
  EndLease,
}

export function identifyConduitsInstruction(
  instruction: { data: ReadonlyUint8Array } | ReadonlyUint8Array
): ConduitsInstruction {
  const data = 'data' in instruction ? instruction.data : instruction;
  if (containsBytes(data, getU8Encoder().encode(0), 0)) {
    return ConduitsInstruction.InitApp;
  }
  if (containsBytes(data, getU8Encoder().encode(1), 0)) {
    return ConduitsInstruction.CreateAccessIdentity;
  }
  if (containsBytes(data, getU8Encoder().encode(2), 0)) {
    return ConduitsInstruction.ListDevice;
  }
  if (containsBytes(data, getU8Encoder().encode(3), 0)) {
    return ConduitsInstruction.DelistDevice;
  }
  if (containsBytes(data, getU8Encoder().encode(4), 0)) {
    return ConduitsInstruction.RentDevice;
  }
  if (containsBytes(data, getU8Encoder().encode(5), 0)) {
    return ConduitsInstruction.PayRent;
  }
  if (containsBytes(data, getU8Encoder().encode(6), 0)) {
    return ConduitsInstruction.EndLease;
  }
  throw new Error(
    'The provided instruction could not be identified as a conduits instruction.'
  );
}

export type ParsedConduitsInstruction<
  TProgram extends string = '29V5YJFAMQuN8npySW2Kds8zwf6zPTpJ49LyYv1jSGQQ',
> =
  | ({
      instructionType: ConduitsInstruction.InitApp;
    } & ParsedInitAppInstruction<TProgram>)
  | ({
      instructionType: ConduitsInstruction.CreateAccessIdentity;
    } & ParsedCreateAccessIdentityInstruction<TProgram>)
  | ({
      instructionType: ConduitsInstruction.ListDevice;
    } & ParsedListDeviceInstruction<TProgram>)
  | ({
      instructionType: ConduitsInstruction.DelistDevice;
    } & ParsedDelistDeviceInstruction<TProgram>)
  | ({
      instructionType: ConduitsInstruction.RentDevice;
    } & ParsedRentDeviceInstruction<TProgram>)
  | ({
      instructionType: ConduitsInstruction.PayRent;
    } & ParsedPayRentInstruction<TProgram>)
  | ({
      instructionType: ConduitsInstruction.EndLease;
    } & ParsedEndLeaseInstruction<TProgram>);
